# Azure CLI (az) â€“ Virtual Machine Management Guide ğŸš€

This document explains how to **install, authenticate, and use Azure CLI (`az`)** to manage **Azure Resource Groups and Virtual Machines (Linux & Windows)** using **Bash (Bourne Again Shell)**.

---

## 1. What is Azure CLI?

**Azure CLI (`az`)** is a **cross-platform command-line tool** used to manage Azure resources from:

* macOS
* Linux
* Windows (PowerShell / WSL / Git Bash)

It is commonly used in:

* DevOps automation
* CI/CD pipelines
* Infrastructure provisioning
* Cloud labs & demos

---

## 2. Shell Used â€“ Bash ğŸš

**Bash (Bourne Again Shell)** is the default shell for:

* Linux
* macOS
* Azure Cloud Shell

It supports:

* Multi-line commands using `\`
* Scripting
* Environment variables

---

## 3. Verify Azure CLI Installation

```bash
az --version
```

âœ… Confirms:

* Azure CLI version
* Python version
* Installed extensions

---

## 4. Azure Login Methods ğŸ”

### 4.1 Standard Login (Browser-based)

```bash
az login
```

* Opens browser
* Authenticate using Azure account
* Default tenant & subscription selected

---

### 4.2 Login Using Specific Tenant ID

```bash
az login --tenant <tenant-id>
```

ğŸ“Œ **Tenant ID Location**
Azure Portal â†’ **Microsoft Entra ID (Azure AD)** â†’ **Tenant properties**

---

## 5. Create a Resource Group ğŸ“¦

### Multi-line (Readable)

```bash
az group create \
  --name myResourceGroup \
  --location eastus
```

### Single-line

```bash
az group create --name myResourceGroup --location eastus
```

âœ… Resource Groups are logical containers for Azure resources.

---

## 6. Create Linux VM (Ubuntu 22.04) ğŸ§

```bash
az vm create \
  --resource-group myResourceGroup \
  --name myVM \
  --image Ubuntu2204 \
  --size Standard_B1s \
  --admin-username azureuser \
  --generate-ssh-keys \
  --public-ip-sku Standard \
  --os-disk-size-gb 30
```

### Key Parameters Explained

| Parameter             | Description                 |
| --------------------- | --------------------------- |
| `--image`             | OS Image (Ubuntu 22.04 LTS) |
| `--size`              | VM SKU                      |
| `--generate-ssh-keys` | Auto-create SSH keys        |
| `--public-ip-sku`     | Standard IP                 |
| `--os-disk-size-gb`   | Disk size                   |

---

## 7. Open Port on VM (HTTP â€“ Port 80) ğŸŒ

### Multi-line

```bash
az vm open-port \
  --resource-group myResourceGroup \
  --name myVM \
  --port 80
```

### Single-line

```bash
az vm open-port --resource-group myResourceGroup --name myVM --port 80
```

âœ… Updates Network Security Group (NSG)

---

## 8. Install NGINX Using VM Extension âš™ï¸

### Option 1: Inline Command (Quick Method)

```bash
az vm extension set \
  --resource-group myResourceGroup \
  --vm-name myVM \
  --name CustomScript \
  --publisher Microsoft.Azure.Extensions \
  --settings '{
    "commandToExecute": "sudo apt update && sudo apt install -y nginx"
  }'
```

---

### Option 2: Using `settings.json` (Recommended for Production)

#### Step 1: Create `settings.json`

```json
{
  "commandToExecute": "sudo apt update && sudo apt install -y nginx"
}
```

#### Step 2: Run Extension Command

```bash
az vm extension set \
  --resource-group myRG \
  --vm-name vm-ubuntu-01 \
  --name CustomScript \
  --publisher Microsoft.Azure.Extensions \
  --settings settings.json
```

---

## 9. Access Web Server ğŸŒ

```text
http://<VM-PUBLIC-IP>
```

You should see the **NGINX default page**.

---

## 10. List All Virtual Machines ğŸ“‹

```bash
az vm list
```

(Optional formatted output)

```bash
az vm list --output table
```

---

## 11. Delete Linux VM ğŸ—‘ï¸

```bash
az vm delete \
  --resource-group myResourceGroup \
  --name myVM
```

---

## 12. Create Windows Server VM ğŸªŸ

```bash
az vm create \
  --resource-group myResourceGroup \
  --name MyVM \
  --image Win2022Datacenter \
  --size Standard_B2s \
  --admin-username azureadmin \
  --admin-password 'StrongPassword@123' \
  --public-ip-sku Standard \
  --os-disk-size-gb 127
```

âš ï¸ Password must meet **Azure complexity rules**.

---

## 13. Delete Windows VM âŒ

```bash
az vm delete \
  --resource-group myResourceGroup \
  --name MyVM
```

---

## 14. Best Practices âœ…

* Use **SSH keys** instead of passwords for Linux
* Store scripts in files (`settings.json`)
* Use **tags** for cost tracking
* Prefer **Standard public IP** for production
* Automate with **Azure DevOps / GitHub Actions**

---
